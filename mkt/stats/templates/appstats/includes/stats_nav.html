{% set urls = [
  (addon.get_stats_url(action='overview'), _('Overview')),
  (addon.get_stats_url(action='installs'), _('Installs')),
] %}

{% set sales_filters = [
    ('revenue', stats_url('revenue'), _('Amount Earned')),
    ('sales', addon.get_stats_url(action='sales'), _('Units Sold')),
    ('refunds', addon.get_stats_url(action='refunds'), _('Units Refunded'))
] %}

<section class="secondary">
  <div class="report-menu" id="side-nav">
    <ul>
      {% for link, title in urls %}
        <li{% if url_quote(request.path) == link %} class="selected active"{% endif %}>
          <a href="{{ link }}">{{ title }}</a></li>
      {% endfor %}

      {% if (addon.is_premium() and check_contrib_stats_perms(addon)) or inapps %}
        {% block sales_filters %}
          {% for action, link, title in sales_filters %}
            <li{% if url_quote(request.path) == link %} class="selected active"{% endif %}>
              <a href="{{ link }}">{{ title }}</a></li>

            <li class="secondary-nav
             {% if url_quote(request.path) == addon.get_stats_url(action='currency_' + action) %}
               selected active
             {% endif %}">
              <a href="{{ addon.get_stats_url(action='currency_' + action)}}">{{ _('by Currency') }}</a>
            </li>
            <li class="secondary-nav
             {% if url_quote(request.path) == addon.get_stats_url(action='source_' + action) %}
               selected active
             {% endif %}">
              <a href="{{ addon.get_stats_url(action='source_' + action)}}">{{_('by Source') }}</a>
            </li>
          {% endfor %}
        {% endblock %}
      {% endif %}

    </ul>
  </div>
</section>
