{% extends 'developers/skeleton_impala.html' %}

{% block title %}{{ reviewers_page_title() }}{% endblock %}

{% block bodyclass %}editor-tools{% endblock %}

{% block masthead %}
<h1 id="masthead" class="site-title prominent">
  <a href="{{ url('reviewers.home') }}">
    {% trans %}
      <small>Marketplace</small> Reviewer Tools
    {% endtrans %}
  </a>
</h1>

<nav class="pill-nav">
  {% if action_allowed('Apps', 'Review') %}
    {# "selected" logic will change if we ever have more than just apps + themes #}
    <a {% if 'themes' not in request.path %}class="selected" {% endif %}
       href="{{ url('reviewers.apps.queue_pending') }}">{{ _('Apps') }}</a>
  {% endif %}
  <!--<a href="{# url('reviewers.addons.queue_pending') #}">{{ _('Add-ons') }}</a>-->
  {% if action_allowed('Personas', 'Review') %}
    <a {% if 'themes' in request.path %}class="selected" {% endif %}
       href="{{ url('reviewers.themes.list') }}">{{ _('Themes') }}</a>
  {% endif %}
</nav>
{% endblock %}

{% block extrahead %}
  {{ css('mkt/reviewers') }}
  {{ css('mkt/gaia') }}
{% endblock %}

{% block site_header_title %}
  <div id="site-nav">
    <div class="pad">
      <nav class="menu-nav app-nav no-img" role="navigation">
        <ul class="c">
          <li{% if 'queue' in request.path or url('reviewers.apps.apps_reviewing')
                in request.path %} class="selected"{% endif %}>
            <a href="#" class="controller trigger-queues">{{ _('Queues') }}</a>
            <ul>
              {% block queue_menu %}
                {% for named_url, tab_code, text in queue_tabnav() %}
                  <li><a href="{{ url(named_url) }}">{{ text }}</a></li>
                {% endfor %}
              {% endblock %}
            </ul>
          </li>
          <li{% if 'logs' in request.path %} class="selected"{% endif %}>
              <a href="{% block log_link %}{{ url('reviewers.apps.logs') }}{% endblock %}">
                {{ _('Logs') }}</a>
          </li>
          {% if action_allowed('AppReviewerMOTD', 'Edit') %}
            <li class="slim">
              <a href="{{ url('reviewers.apps.motd') }}">{{ _('Announcement') }}</a>
            </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
{% endblock %}

{% block js %}
  {{ js('mkt/reviewers') }}
{% endblock %}

{# Hiding these for the Marketplace Editor Tools until consumer pages are done. #}
{% block header_search %}{{ super() if not settings.MARKETPLACE }}{% endblock %}
{% block footer %}{{ super() if not settings.MARKETPLACE }}{% endblock %}

{% block outer_content %}
  {% block breadcrumbs %}{% endblock %}
  {% include 'editors/includes/daily-message.html' %}
  {% include 'messages.html' %}

  <form id="queue-tab-overlay" class="hidden" role="dialog" data-type="action">
    <header>{{ _('Queues') }}</header>
    <menu class="nav-action-menu">
      <div>
        {% block queue_overlay %}
          {% for named_url, tab_code, text in queue_tabnav() %}
            <button data-url="{{ url(named_url) }}">{{ text }}</button>
          {% endfor %}
        {% endblock %}
      </div>
      <button data-url="#cancel">Cancel</button>
    </menu>
  </form>
{% endblock %}
