{% extends "impala/base_shared.html" %}
{% from 'includes/forms.html' import required %}

{% block extrahead %}
  {{ css('zamboni/personasrq') }}
{% endblock %}

{% block title %}
  {{ _('Theme Review Queue') }}
{% endblock %}

{% block content %}

<h1>{{ _('Theme Review Queue') }}</h1>

<div class="sidebar"><div class="float">
  <form class="box options">
    <h2>{{ _('Review Options') }}</h2>
    <fieldset>
      <select id="rq-category">
        <option>{{ _('All Categories') }}</option>
        <option>{{ _('Abstract') }}</option>
        <option>{{ _('Causes') }}</option>
        <option>{{ _('Fashion') }}</option>
        <option>{{ _('Film and TV') }}</option>
        <option>{{ _('Firefox') }}</option>
        <option>{{ _('Foxkeh') }}</option>
        <option>{{ _('Holiday') }}</option>
        <option>{{ _('Music') }}</option>
        <option>{{ _('Nature') }}</option>
        <option>{{ _('Scenery') }}</option>
        <option>{{ _('Solid') }}</option>
        <option>{{ _('Sports') }}</option>
        <option>{{ _('Websites') }}</option>
        <option>{{ _('Other') }}</option>
      </select>
    </fieldset>

<!--
    <fieldset>
      <div class="option">
        <input type="radio" id="rq-previews" name="rq-show" value="previews" />
        <label for="rq-previews">Show previews only</label>
      </div>
      <div class="option">
        <input type="radio" id="rq-details" name="rq-show" value="details" checked="checked" />
        <label for="rq-details">Show all details</label>
      </div>
    </fieldset>
-->

    <fieldset>
      <div class="option">
        <input type="checkbox" id="rq-advance" value="advance" checked="checked" />
        <label for="rq-advance">{{ _('Auto-advance after review') }}</label>
      </div>
<!--
      <div class="option">
        <input type="checkbox" id="rq-single" value="single" checked="checked" />
        <label for="rq-single">Show a single Theme</label>
      </div>
      <div class="option">
        <input type="checkbox" id="rq-shortcuts" value="shortcuts" checked="checked" />
        <label for="rq-shortcuts">Enable keyboard shortcuts</label>
      </div>
-->
    </fieldset>
  </form>

  <div class="box shortcuts">
    <h2>{{ _('Keyboard Shortcuts') }}</h2>
    <ul>
      <li><strong>J</strong> <span>{{ _('Next Theme') }}</span></li>
      <li><strong>K</strong> <span>{{ _('Previous Theme') }}</span></li>
      <li class="divider"></li>
      <li><strong>A</strong> <span>{{ _('Approve') }}</span></li>
      <li><strong>R</strong> <span>{{ _('Reject') }}</span></li>
      <li><strong>D</strong> <span>{{ _('Duplicate') }}</span></li>
      <li><strong>F</strong> <span>{{ _('Flag') }}</span></li>
      <li><strong>M</strong> <span>{{ _('Request More Info') }}</span></li>
    </ul>
  </div>
  <button id="commit" type="submit">Commit</button>
  <div id="queue-details">
    <span id="reviewed-count">0</span><span> {{ _('out of') }} </span><span id="total">{{ persona_count }}</span> {{ _('reviewed') }}</span>
  </div>
</div></div>

<div class="persona-queue details single">
  <form id="persona-queue-form" method="post">
    {{ csrf() }}
    {{ formset.management_form }}
    {% for persona, form in persona_formset %}
      <div class="persona" data-id="{{ persona.persona_id }}"><div class="persona-inner">
        {{ form }}
        <h3><a href="#">{{ persona.addon.name }}</a></h3>
        <div class="status"></div>
        <ul class="meta">
          <li><strong>{{ _('Artist') }}</strong>: <a href="#">{{ persona.author }}</a></li>
          <li><strong>{{ _('Category') }}</strong>: <a href="#">{{ persona.addon.categories.all()[0] if persona.addon.categories.all() }}</a></li>
          <li><strong>{{ _('Submitted') }}</strong>: {{ persona.addon.created.strftime('%Y-%m-%d') }}</li>
        </ul>
        <ul class="meta">
          <li><strong>{{ _('License') }}</strong>: <a href="#">{{ persona.license }}</a></li>
        </ul>

        <div class="preview">
          <img src="{{ persona.header_url }}" width="1250" height="100" />
        </div>
        <div class="header zoombox">
          <img src="{{ persona.header_url }}" width="2500" height="200" />
        </div>
        <div class="footer zoombox">
          <img src="{{ persona.footer_url }}" width="2500" height="100" />
        </div>

        {% if persona.addon.description %}
          <div class="desc"><strong>{{ _('Description ') }}: </strong>{{ persona.addon.description }}</div>
        {% endif %}

        <div class="choices">
          <div class="group">
            <button class="moreinfo" data-id="{{ persona.persona_id }}">{{ _('Request More Info') }} &#9662;</button>
          </div>
          <div class="group">
            <button class="flag" data-id="{{ persona.persona_id }}">{{ _('Flag') }} &#9662;</button>
            <button class="duplicate" data-id="{{ persona.persona_id }}">{{ _('Duplicate') }} &#9662;</button>
            <button class="reject" data-id="{{ persona.persona_id }}">{{ _('Reject') }} &#9662;</button>
          </div>
          <div class="group">
            <button class="approve" data-id="{{ persona.persona_id }}">{{ _('Approve') }}</button>
          </div>
        </div>
        <div class="c"></div>
        <div class="duplicate-dropdown rq-dropdown">
          <span>{{ _('Enter the ID or URL of the duplicate') }}:</span>
          <textarea></textarea>
          <strong class="error-required">{{ required() }} Field required</strong>
          <button>Continue</button>
        </div>
        <div class="reject-reason-dropdown rq-dropdown">
          <span>{{ _('Select a reason for rejection') }}:</span>
          <ul>
            {% for reject_reason in reject_reasons %}
              <li class="reject_reason" data-id="{{ reject_reason[0] }}">
                <strong>{{ reject_reason[0]}}: </strong>
                <span>{{ reject_reason[1] }}</span>
              </li>
            {% endfor %}
          </ul>
        </div>
        <div class="reject-reason-detail-dropdown rq-dropdown">
          <span>{{ _('Describe your reason for rejection') }}:</span>
          <textarea></textarea>
          <strong class="error-required">{{ required() }} Field required</strong>
          <button>{{ _('Continue') }}</button>
        </div>
        <div class="moreinfo-dropdown rq-dropdown">
          <span>{{ _('Enter your request for') }} <span>{{ persona.author }}</span>:</span>
          <textarea></textarea>
          <strong class="error-required">{{ required() }} Field required</strong>
          <button>{{ _('Continue') }}</button>
        </div>
        <div class="flag-dropdown rq-dropdown">
          <span>{{ _('Describe your reason for flagging') }}:</span>
          <textarea></textarea>
          <strong class="error-required">{{ required() }} Field required</strong>
          <button>{{ _('Continue') }}</button>
        </div>
      </div></div>
    {% endfor %}
  </form>
</div>
{% endblock %}

{% block js %}
  {{ js('zamboni/personasrq') }}
{% endblock %}
